:css
  .category_statistics_wrapper {
    display: flex;
    width: 100%;
    align-items: center;
    column-gap: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

%h3 Statistics
.bg-white.main-box-shadow.default-border-radius.p-3
  #filterAccordion.accordion
    .accordion-item
      %h5#headingOne.accordion-header
        %button.accordion-button{"aria-controls": "collapseOne",
                                   "aria-expanded": "true",
                                   "data-bs-target": "#collapseOne",
                                   "data-bs-toggle": "collapse",
                                   type: "button"}
          Global Filters
      #collapseOne.accordion-collapse.collapse{"aria-labelledby": "headingOne",
                                               "data-bs-parent": "#filterAccordion"}
        .accordion-body
          = form_tag statistics_path, method: :get do
            %div
              = label_tag 'Date Range:', nil, class: 'mt-2'
              %div.d-flex.justify-content-start.gap-3
                %div
                  = label_tag 'Start:', nil, class: 'mt-2'
                  = date_field_tag 'start_date', @start_date, class: 'form-date form-select-sm'
                %div
                  = label_tag 'End:', nil, class: 'mt-2'
                  = date_field_tag 'end_date', @end_date, class: 'form-date form-select-sm'
            %div
              = label_tag 'Payment Type:', nil, class: 'mt-3'
              = select_tag 'payment_type',
                             options_for_select(%w[All Income Expense], @payment_type),
                             class: 'form-select form-select-sm'
            %div
              = label_tag 'Account:', nil, class: 'mt-3'
              = select_tag 'account',
                             options_from_collection_for_select(current_user.accounts.order(:name), "id", "name", @account_id),
                             prompt: 'All',
                             class: 'form-select form-select-sm'
            = submit_tag 'Apply', class: 'btn btn-primary btn-sm mt-3'
  %hr
  %h4 Transactions by category
  .category_statistics_wrapper
    %div
      = pie_chart @transactions_by_category, legend: "left",
                                             donut: true,
                                             prefix: "$",
                                             thousands: ",",
                                             decimal: ".",
                                             round: 2,
                                             loading: "Loading...",
                                             colors: %w( #326e6e #77afb6 #c6d9e8 #c1c7df #7c99bb ),
                                             dataset: {borderWidth: 5}
    %div
      %table.table.table-hover
        %thead
          %tr
            %th{ scope: 'col' }Category
            %th{ scope: 'col' }Amount
            %th{ scope: 'col' }% of Total
        %tbody
          - @transactions_by_category.each do |data|
            %tr
              %td=data.first
              %td=number_to_currency(data.last)
              %td=number_to_percentage((data.last / @transactions_total) * 100,  precision: 2)
  %hr
  %h4 Transactions by day
  %br
  = line_chart @transactions_by_week, xmin: @start_date,
                                     xmax: @end_date,
                                     prefix: "$",
                                     thousands: ",",
                                     decimal: ".",
                                     round: 2,
                                     loading: "Loading...",
                                     colors: %w( #326e6e #77afb6 #c6d9e8 #c1c7df #7c99bb )
  %hr
  %h4 Transactions by month
  = column_chart @transactions_by_month,
                                     prefix: "$",
                                     thousands: ",",
                                     decimal: ".",
                                     round: 2,
                                     loading: "Loading...",
                                     colors: %w( #326e6e #77afb6 #c6d9e8 #c1c7df #7c99bb )


